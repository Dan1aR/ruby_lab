<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Главная страница</title>
<meta name='viewport' content='width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no'/>
<meta name="description" content="">
<meta name="keywords" content="">
<link href="" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet" >
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" ></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script>
</head>
<body>
    <div class="container">
      <header class="blog-header py-3">
        <div class="row flex-nowrap justify-content-between align-items-center border-bottom">
            <div class="col-4 pt-1">
              <ul class="nav col-12 col-lg-auto mb-2 mb-mb-0">
                <li>
                  <%= link_to '#', class: "nav-link px-2 dropdown-toggle text-black", data: {"bs-toggle": "dropdown"} do %>
                    <%= tag.div '', class: "flag #{I18n.locale}-flag mt-1" %>
                    <%= t I18n.locale %>
                  <% end %>
                  <ul class="dropdown-menu">
                    <% I18n.available_locales.each do |locale| %>
                      <li>
                        <% if I18n.locale == locale %>
                          <%= tag.span t(locale), class: "dropdown-item" %>
                        <% else %>
                          <%= link_to t(locale), root_path(locale: locale), class: "dropdown-item" %>
                        <% end %>
                      </li>
                    <% end %>
                  </ul>

                </li>
              </ul>
              
            </div>
            <div class="col-4">
              <h4 class="blog-header-logo text-dark" href="#"><%= t 'posts.index.hello' %></h4>
            </div>
            <% if signed_in? %>
              <div class="col-2 d-flex justify-content-end align-items-center">
                <a class="btn btn-sm btn-outline-secondary" href=<%=session_update_path%>><%= current_user.username%></a>
                |
                <a class="btn btn-sm btn-outline-secondary" href=<%=session_logout_path%>><%= t 'posts.index.logout' %></a>
              </div>
            <% else %>
              <div class="col-2 d-flex justify-content-end align-items-center">
                <a class="btn btn-sm btn-outline-secondary" href="<%=session_login_path%>"><%= t 'posts.index.login' %></a>
              </div>
            <% end %>

        </div>
      </header>
    </div>
    
    <main role="main">

      <div class="album py-5 bg-light">
        <div class="container">

          <div class="row">
            <% @posts.each do |post| %>
              <div class="col-md-4">
                <div class="card mb-4 box-shadow">
                  <% if post.avatar.attached? %>                          
                    <img class="card-img-top" src="<%= url_for(post.avatar) %>">
                  <% end %>
                  
                  <div class="card-body">
                    <h3 class="mb-0">
                      <%= post.title %>
                    </h3>
                    <p class="card-text"><%= post.text[0..140] %>...</p>
                    <div class="d-flex justify-content-between align-items-center">

                      <div class="btn-group">
                        <%= button_to t('posts.index.open'), post, :method=>:get, :type=>"button", :class=>"btn btn-sm btn-outline-secondary" %>
                      </div>
              
                      <small class="text-muted"><%= post.created_at.strftime("%d-%m-%Y") %></small>
                    </div>
                  </div>
                </div>
              </div>
            <% end %>
        </div>
      </div>

    </main>

    
  <div style="position:fixed;bottom:5px;right:5px;margin:0;padding:5px 3px;">
    <% if signed_in? %>
      <%= link_to '+', new_post_path, :class=>"btn btn-primary", :role=>"button", :style=> 'color:#FFFFFF;' %>
    <% end %>
  </div>
    
    
</body>
</html>